TODO:
- first iter of tf algo (with end states)
- second and next iterations
- == overload
